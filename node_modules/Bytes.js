var Int = require("Int.js")

module.exports = Bytes;

function Bytes(hexString) {
    this._value = hexStringToBuffer(hexString);
    this.valueOf = function() {
        return this._value.toString("hex");
    }
    this.encoding = function() {
        var result = this._value.toString("hex");
        while (result.length % 32 != 0) {
            result.push("00");
        }

        var len = new Int(byteLength);
        result = len.encoding() + result;
        
        return result;
    }
    this.toString = function () {
        return "0x" + this._value.toString("hex");
    }
}

function hexStringToBuffer(hexString) {
    if (hexString.slice(0,2) === "0x") {
        hexString = hexString.slice(2);
    }
    if (hexString.length % 2 != 0) {
        hexString.unshift('0');
    }

    var byteLength = hexString.length/2;
    var result = new Buffer(byteLength);
    result.write(hexString, undefined, byteLength, "hex");
    return result;
}
