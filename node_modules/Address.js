module.exports = Address;

function Address(hexString) {
    this._value = hexStringToBuffer(hexString);
    this.valueOf = function() {
        return this._value.toString("hex");
    }
    this.encoding = function() {
        var result = this._value.toString("hex");
        for (var i = 0; i < 12; ++i) {
            result.unshift("00");
        }
        return result;
    }
    this.toString = function () {
        return "0x" + this._value.toString("hex");
    }
}

function hexStringToBuffer(hexString) {
    var result = new Buffer(20);
    result.fill('\x00');

    if (hexString.slice(0,2) === "0x") {
        hexString = hexString.slice(2);
    }
    if (hexString.length > 40) {
        hexString = hexString.slice(-40);
    }
    if (hexString.length % 2 != 0) {
        hexString.unshift('0');
    }
        
    result.write(hexString, 20 - hexString.length/2, undefined, "hex");
    return result;
}
